/*! Fluvidus v1 | Randell Quitain - http://github.com/mugetsu */
(function(e){function t(t,n){return e(n.frame,t).width()*n.childItems.length/e(n.frame,t).width()*100}function n(t,n){return e(n.frame,t).width()/(e(n.frame,t).width()*n.childItems.length)*100}function r(t,n,r,i){var o=e(n.child,t).children().length,a=n.childItems.length-1,f=n.pager===true?typeof r[0]==="undefined"?0:r[0]:r,l=n.pager===true?r[1]||0:r,c=n.pager===true?f:l>=a?0:l+1,h=n.pager===true?f:l<=0?a:l-1,p=[l,c,h];i=i||0;if(o===0){for(var d=0;d<p.length;d++){s(document.getElementById(n.frameBase[d].frameId),n,p[d])}}else{s(document.getElementById(n.frameBase[0].frameId),n,l);if(i>0){c=n.pager===true?c:h;s(document.getElementById(n.frameBase[2].frameId),n,c)}else{h=n.pager===true?h:c;s(document.getElementById(n.frameBase[1].frameId),n,h)}}u(t,n,i)}function s(t,n,r){var i=new Image,s=document.createElement("p"),u=document.createTextNode(n.childItems[r].desc);e(i).load(function(i){if(e("img, p",t).length!=0){e("img, p",t).remove()}o(this,{src:n.childItems[r].hero,alt:n.childItems[r].desc});s.appendChild(u);t.appendChild(this);t.appendChild(s)});e(i).attr("src",n.loaderIcon)}function o(e,t){for(var n in t){e.setAttribute(n,t[n])}}function u(t,n,r){if(r>0){e(n.frame,t).css("left","0%").stop(true).animate({left:-100+"%"},n.delay,n.easing)}else{e(n.frame,t).css("left","-200%").stop(true).animate({left:-100+"%"},n.delay,n.easing)}}e.fluvidus=function(s,o){this.options={};s.data("fluvidus",this);this.init=function(t,n){this.options=e.extend({},e.fluvidus.defaults,n);r(t,this.options,0);this.applyFluidity(t,this.options);this.applyNavigation(t,this.options);this.applyEvents(t,this.options)};this.applyFluidity=function(r,i){e(i.frame,r).css({left:-100+"%",width:t(r,i)+"%"});e(i.child,r).width(n(r,i)+"%")};this.applyNavigation=function(t,n){var r,s;if(n.pager===true){for(i=1;i<=n.childItems.length;i++){i===1?r='<li class="'+n.navItemLabel+'"><a class="fluvidus-button fluvidus-button-active">'+i+"</a></li>":r+='<li class="'+n.navItemLabel+'"><a class="fluvidus-button" href="#">'+i+"</a></li>"}s="fluvidus-pager"}else{r='<li id="'+n.prevId+'" class="'+n.navItemLabel+'"><a class="fluvidus-button">'+n.navPrevLabel+"</a></li>";r+='<li id="'+n.nextId+'" class="'+n.navItemLabel+'"><a class="fluvidus-button">'+n.navNextLabel+"</a></li>";s="fluvidus-nav"}e(t).append('<ul class="'+s+'">'+r+"</ul>")};this.applyEvents=function(t,n){var i=0,s=n.childItems.length,o=n.pager===true?[s-1,0]:0;if(n.pager===true){e(document.getElementsByClassName(n.navItemLabel),t).click(function(s){s.preventDefault();e("a",document.getElementsByClassName(n.navItemLabel)).removeClass(n.pagerActive);e("a",this).addClass(n.pagerActive);i=e(this).index();if(i!=o[1]){o.push(i);if(o.length>=3)o.shift();r(t,n,o,o[0]>o[1]?-1:1)}})}else{e(document.getElementById(n.nextId),t).click(function(e){e.preventDefault();o>=s-1?o=0:o++;r(t,n,o,1)});e(document.getElementById(n.prevId),t).click(function(e){e.preventDefault();o<=0?o=s-1:o--;r(t,n,o,-1)})}};this.init(s,o)};e.fn.fluvidus=function(t){return this.each(function(){new e.fluvidus(e(this),t)})};e.fluvidus.defaults={frame:".fluvidus-frame",frameBase:[{frameId:"fluvidus-item-curr"},{frameId:"fluvidus-item-next"},{frameId:"fluvidus-item-prev"}],child:".fluvidus-item",childItems:[{hero:"images/star-birth-clouds_1227_990x742.jpg",desc:"Pillars of gas in the Eagle nebula"}],navItemLabel:"fluvidus-nav-item",navPrevLabel:"Previous",navNextLabel:"Next",prevId:"fluvidus-button-prev",nextId:"fluvidus-button-next",loaderIcon:"images/loader.gif",pager:true,pagerActive:"fluvidus-button-active",delay:600,easing:"linear"}})(jQuery)