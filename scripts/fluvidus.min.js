/*! Fluvidus v1 | Randell Quitain - http://github.com/mugetsu */
(function(e){function t(t,n){return e(n.frame,t).width()*(n.childItems.length-1)/e(n.frame,t).width()*100}function n(t,n){return e(n.frame,t).width()/(e(n.frame,t).width()*(n.childItems.length-1))*100}function r(t,n,r,i){var o=e(n.child,t).children().length,a=n.childItems.length-1,f=[{prev:r===0?a:r-1},{curr:r},{next:r+1>a?0:r+1}];for(var l=0;l<f.length;l++){for(var c in f[l]){if(o===0){s(document.getElementById(n.frameBase[l].frameId),n,f[l][c]);e(document.getElementById(n.frameBase[l].frameId),t).append("<p>"+n.childItems[f[l][c]].desc+"</p>")}else{for(var l=0;l<f.length;l++){for(var c in f[l]){s(document.getElementById(n.frameBase[l].frameId),n,f[l][c]);e(document.getElementById(n.frameBase[l].frameId),t).find("p").text(n.childItems[f[l][c]].desc)}}}}}u(t,n,i)}function s(t,n,r){var i=new Image;i.onload=function(){if(e("img",t).length!=0)e("img",t).remove("img");t.appendChild(this)};o(i,{src:n.childItems[r].hero,alt:n.childItems[r].desc})}function o(e,t){for(var n in t){e.setAttribute(n,t[n])}}function u(t,n,r){if(r>0){e(n.frame,t).css("left","0%").stop(true).animate({left:-100+"%"})}else{e(n.frame,t).css("left","-200%").stop(true).animate({left:-100+"%"})}}e.fluvidus=function(s,o){this.options={};s.data("fluvidus",this);this.init=function(t,n){this.options=e.extend({},e.fluvidus.defaults,n);r(t,this.options,0);this.applyFluidity(t,this.options);this.applyNavigation(t,this.options);this.applyEvents(t,this.options)};this.applyFluidity=function(r,i){e(i.frame,r).css({left:-100+"%",width:t(r,i)+"%"});e(i.child,r).width(n(r,i)+"%")};this.applyNavigation=function(t,n){var r,s;if(n.pager===true){for(i=1;i<=n.childItems.length;i++){i===1?r='<li class="'+n.navItemLabel+'"><a class="fluvidus-button fluvidus-button-active">'+i+"</a></li>":r+='<li class="'+n.navItemLabel+'"><a class="fluvidus-button" href="#">'+i+"</a></li>"}s="fluvidus-pager"}else{r='<li id="'+n.prevId+'" class="'+n.navItemLabel+'"><a class="fluvidus-button">'+n.navPrevLabel+"</a></li>";r+='<li id="'+n.nextId+'" class="'+n.navItemLabel+'"><a class="fluvidus-button">'+n.navNextLabel+"</a></li>";s="fluvidus-nav"}e(t).append('<ul class="'+s+'">'+r+"</ul>")};this.applyEvents=function(t,n){var i=0,s=n.childItems.length,o=[0],u,a;if(n.pager===true){e(document.getElementsByClassName(n.navItemLabel),t).click(function(f){f.preventDefault();e("a",document.getElementsByClassName(n.navItemLabel)).removeClass(n.pagerActive);e("a",this).addClass(n.pagerActive);i=e(this).index();u=typeof u==="undefined"?0:o.length-1;o.push(i);if(i!=o[u]){r(t,n,i<0?i=s-1:i,i>o[u]?a=1:a=-1)}})}else{e(document.getElementById(n.nextId),t).click(function(e){e.preventDefault();i++;r(t,n,i>=s?i=0:i,1)});e(document.getElementById(n.prevId),t).click(function(e){e.preventDefault();i--;r(t,n,i<0?i=s-1:i,-1)})}};this.init(s,o)};e.fn.fluvidus=function(t){return this.each(function(){new e.fluvidus(e(this),t)})};e.fluvidus.defaults={frame:".fluvidus-frame",frameBase:[{frameId:"fluvidus-item-prev"},{frameId:"fluvidus-item-curr"},{frameId:"fluvidus-item-next"}],child:".fluvidus-item",childItems:[{hero:"images/star-birth-clouds_1227_990x742.jpg",desc:"Pillars of gas in the Eagle nebula"}],navItemLabel:"fluvidus-nav-item",navPrevLabel:"Previous",navNextLabel:"Next",prevId:"fluvidus-button-prev",nextId:"fluvidus-button-next",loaderIcon:"images/loader.gif",pager:true,pagerActive:"fluvidus-button-active"}})(jQuery)