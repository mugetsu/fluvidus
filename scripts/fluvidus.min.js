/*! Fluvidus v1 | (c) 2013 Randell Quitain | GPL */
(function(e){function t(e){return e.width()}function n(t){return t.find(e.fluvidus.defaults.child).length}function r(e){return t(e)*n(e)/t(e)*100}function s(e){return t(e)/(t(e)*n(e))*100}function o(e,t){return r(e)/n(e)*t}function u(t,n,r){e(t.parent,t.container).stop(true,true).animate({left:n===0?r+"%":-r+"%"})}e.fluvidus=function(t,a){this.options={};t.data("fluvidus",this);this.init=function(t,n){this.options=e.extend({},e.fluvidus.defaults,n);this.applyFluidity(t,this.options);this.applyNavigation(t,this.options);this.applyEvents(t,this.options)};this.test=function(e){console.log("Hello, "+e+", thanks for using Fluvidus!")};this.applyFluidity=function(t,n){e(n.parent,n.container).css("width",r(t)+"%");e(n.child,n.container).css("width",s(t)+"%")};this.applyNavigation=function(t,r){if(r.pager===true){var s;for(i=1;i<=n(t);i++){i===1?s='<li class="'+r.nav_pager_item+'"><a class="fluvidus-button fluvidus-button-active" href="#">'+i+"</a></li>":s+='<li class="'+r.nav_pager_item+'"><a class="fluvidus-button" href="#">'+i+"</a></li>"}e(r.container).append('<ul class="fluvidus-pager">'+s+"</ul>")}else{nav_buttons='<li id="'+r.prev_id+'" class="'+r.nav_pager_item+'"><a class="fluvidus-button" href="#">'+r.nav_prev_label+"</a></li>";nav_buttons+='<li id="'+r.next_id+'" class="'+r.nav_pager_item+'"><a class="fluvidus-button" href="#">'+r.nav_next_label+"</a></li>";e(r.container).append('<ul class="fluvidus-nav">'+nav_buttons+"</ul>")}};this.applyEvents=function(t,r){var i,s,a;if(r.pager===true){r.nav_pager_item="."+r.nav_pager_item;e(r.nav_pager_item,r.container).find("a").click(function(n){n.preventDefault();i=e(this).parent().index(),a=o(t,i);e(r.nav_pager_item,r.container).find("a").removeClass("fluvidus-button-active");e(this).addClass("fluvidus-button-active");u(r,i,a)})}else{r.nav_pager_item="."+r.nav_pager_item;s=0;e(r.nav_pager_item,r.container).find("a").click(function(f){f.preventDefault();var l=e(this).parent().prop("id");if(l===r.prev_id){s--;s<0?s=n(t)-1:s}else{s++;s>=n(t)?s=0:s}a=o(t,s);u(r,i,a)})}};this.init(t,a)};e.fn.fluvidus=function(t){return this.each(function(){new e.fluvidus(e(this),t)})};e.fluvidus.defaults={container:"#fluvidus",parent:".fluvidus-frame",child:".fluvidus-item",pager:true,nav_pager_item:"fluvidus-nav-item",prev_id:"fluvidus-button-prev",next_id:"fluvidus-button-next",nav_prev_label:"Previous",nav_next_label:"Next"}})(jQuery)